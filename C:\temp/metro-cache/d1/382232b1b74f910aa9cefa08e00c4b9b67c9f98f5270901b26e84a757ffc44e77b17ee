{"dependencies":[{"name":"./batch","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  exports.__esModule = true;\n  exports[\"default\"] = void 0;\n\n  var _batch = _$$_REQUIRE(_dependencyMap[0], \"./batch\");\n\n  var nullListeners = {\n    notify: function notify() {}\n  };\n\n  function createListenerCollection() {\n    var batch = (0, _batch.getBatch)();\n    var first = null;\n    var last = null;\n    return {\n      clear: function clear() {\n        first = null;\n        last = null;\n      },\n      notify: function notify() {\n        batch(function () {\n          var listener = first;\n\n          while (listener) {\n            listener.callback();\n            listener = listener.next;\n          }\n        });\n      },\n      get: function get() {\n        var listeners = [];\n        var listener = first;\n\n        while (listener) {\n          listeners.push(listener);\n          listener = listener.next;\n        }\n\n        return listeners;\n      },\n      subscribe: function subscribe(callback) {\n        var isSubscribed = true;\n        var listener = last = {\n          callback: callback,\n          next: null,\n          prev: last\n        };\n\n        if (listener.prev) {\n          listener.prev.next = listener;\n        } else {\n          first = listener;\n        }\n\n        return function unsubscribe() {\n          if (!isSubscribed || first === null) return;\n          isSubscribed = false;\n\n          if (listener.next) {\n            listener.next.prev = listener.prev;\n          } else {\n            last = listener.prev;\n          }\n\n          if (listener.prev) {\n            listener.prev.next = listener.next;\n          } else {\n            first = listener.next;\n          }\n        };\n      }\n    };\n  }\n\n  var Subscription = function () {\n    function Subscription(store, parentSub) {\n      this.store = store;\n      this.parentSub = parentSub;\n      this.unsubscribe = null;\n      this.listeners = nullListeners;\n      this.handleChangeWrapper = this.handleChangeWrapper.bind(this);\n    }\n\n    var _proto = Subscription.prototype;\n\n    _proto.addNestedSub = function addNestedSub(listener) {\n      this.trySubscribe();\n      return this.listeners.subscribe(listener);\n    };\n\n    _proto.notifyNestedSubs = function notifyNestedSubs() {\n      this.listeners.notify();\n    };\n\n    _proto.handleChangeWrapper = function handleChangeWrapper() {\n      if (this.onStateChange) {\n        this.onStateChange();\n      }\n    };\n\n    _proto.isSubscribed = function isSubscribed() {\n      return Boolean(this.unsubscribe);\n    };\n\n    _proto.trySubscribe = function trySubscribe() {\n      if (!this.unsubscribe) {\n        this.unsubscribe = this.parentSub ? this.parentSub.addNestedSub(this.handleChangeWrapper) : this.store.subscribe(this.handleChangeWrapper);\n        this.listeners = createListenerCollection();\n      }\n    };\n\n    _proto.tryUnsubscribe = function tryUnsubscribe() {\n      if (this.unsubscribe) {\n        this.unsubscribe();\n        this.unsubscribe = null;\n        this.listeners.clear();\n        this.listeners = nullListeners;\n      }\n    };\n\n    return Subscription;\n  }();\n\n  exports[\"default\"] = Subscription;\n});","lineCount":127,"map":[[2,0,1,0],[4,0,3,0,"exports"],[4,2,3,0,"exports"],[4,9,3,7],[4,10,3,8,"__esModule"],[4,20,3,0],[4,23,3,21],[4,27,3,0],[5,0,4,0,"exports"],[5,2,4,0,"exports"],[5,9,4,7],[5,10,4,8],[5,19,4,7],[5,20,4,0],[5,23,4,21],[5,28,4,26],[5,29,4,0],[7,0,6,0],[7,6,6,4,"_batch"],[7,12,6,10],[7,15,6,13,"require"],[7,26,6,20],[7,56,6,0],[9,0,11,0],[9,6,11,4,"nullListeners"],[9,19,11,17],[9,22,11,20],[10,0,12,2,"notify"],[10,4,12,2,"notify"],[10,10,12,8],[10,12,12,10],[10,21,12,19,"notify"],[10,27,12,10],[10,30,12,28],[10,31,12,30],[11,0,11,20],[11,3,11,0],[13,0,15,0],[13,11,15,9,"createListenerCollection"],[13,35,15,0],[13,38,15,36],[14,0,16,2],[14,8,16,6,"batch"],[14,13,16,11],[14,16,16,14],[14,17,16,15],[14,20,16,18,"_batch"],[14,26,16,24],[14,27,16,25,"getBatch"],[14,35,16,14],[14,38,16,2],[15,0,17,2],[15,8,17,6,"first"],[15,13,17,11],[15,16,17,14],[15,20,17,2],[16,0,18,2],[16,8,18,6,"last"],[16,12,18,10],[16,15,18,13],[16,19,18,2],[17,0,19,2],[17,11,19,9],[18,0,20,4,"clear"],[18,6,20,4,"clear"],[18,11,20,9],[18,13,20,11],[18,22,20,20,"clear"],[18,27,20,11],[18,30,20,28],[19,0,21,6,"first"],[19,8,21,6,"first"],[19,13,21,11],[19,16,21,14],[19,20,21,6],[20,0,22,6,"last"],[20,8,22,6,"last"],[20,12,22,10],[20,15,22,13],[20,19,22,6],[21,0,23,5],[21,7,19,9],[22,0,24,4,"notify"],[22,6,24,4,"notify"],[22,12,24,10],[22,14,24,12],[22,23,24,21,"notify"],[22,29,24,12],[22,32,24,30],[23,0,25,6,"batch"],[23,8,25,6,"batch"],[23,13,25,11],[23,14,25,12],[23,26,25,24],[24,0,26,8],[24,14,26,12,"listener"],[24,22,26,20],[24,25,26,23,"first"],[24,30,26,8],[26,0,28,8],[26,17,28,15,"listener"],[26,25,28,8],[26,27,28,25],[27,0,29,10,"listener"],[27,12,29,10,"listener"],[27,20,29,18],[27,21,29,19,"callback"],[27,29,29,10],[28,0,30,10,"listener"],[28,12,30,10,"listener"],[28,20,30,18],[28,23,30,21,"listener"],[28,31,30,29],[28,32,30,30,"next"],[28,36,30,10],[29,0,31,9],[30,0,32,7],[30,9,25,11],[30,10,25,6],[31,0,33,5],[31,7,19,9],[32,0,34,4,"get"],[32,6,34,4,"get"],[32,9,34,7],[32,11,34,9],[32,20,34,18,"get"],[32,23,34,9],[32,26,34,24],[33,0,35,6],[33,12,35,10,"listeners"],[33,21,35,19],[33,24,35,22],[33,26,35,6],[34,0,36,6],[34,12,36,10,"listener"],[34,20,36,18],[34,23,36,21,"first"],[34,28,36,6],[36,0,38,6],[36,15,38,13,"listener"],[36,23,38,6],[36,25,38,23],[37,0,39,8,"listeners"],[37,10,39,8,"listeners"],[37,19,39,17],[37,20,39,18,"push"],[37,24,39,8],[37,25,39,23,"listener"],[37,33,39,8],[38,0,40,8,"listener"],[38,10,40,8,"listener"],[38,18,40,16],[38,21,40,19,"listener"],[38,29,40,27],[38,30,40,28,"next"],[38,34,40,8],[39,0,41,7],[41,0,43,6],[41,15,43,13,"listeners"],[41,24,43,6],[42,0,44,5],[42,7,19,9],[43,0,45,4,"subscribe"],[43,6,45,4,"subscribe"],[43,15,45,13],[43,17,45,15],[43,26,45,24,"subscribe"],[43,35,45,15],[43,36,45,34,"callback"],[43,44,45,15],[43,46,45,44],[44,0,46,6],[44,12,46,10,"isSubscribed"],[44,24,46,22],[44,27,46,25],[44,31,46,6],[45,0,47,6],[45,12,47,10,"listener"],[45,20,47,18],[45,23,47,21,"last"],[45,27,47,25],[45,30,47,28],[46,0,48,8,"callback"],[46,10,48,8,"callback"],[46,18,48,16],[46,20,48,18,"callback"],[46,28,47,28],[47,0,49,8,"next"],[47,10,49,8,"next"],[47,14,49,12],[47,16,49,14],[47,20,47,28],[48,0,50,8,"prev"],[48,10,50,8,"prev"],[48,14,50,12],[48,16,50,14,"last"],[49,0,47,28],[49,9,47,6],[51,0,53,6],[51,12,53,10,"listener"],[51,20,53,18],[51,21,53,19,"prev"],[51,25,53,6],[51,27,53,25],[52,0,54,8,"listener"],[52,10,54,8,"listener"],[52,18,54,16],[52,19,54,17,"prev"],[52,23,54,8],[52,24,54,22,"next"],[52,28,54,8],[52,31,54,29,"listener"],[52,39,54,8],[53,0,55,7],[53,9,53,6],[53,15,55,13],[54,0,56,8,"first"],[54,10,56,8,"first"],[54,15,56,13],[54,18,56,16,"listener"],[54,26,56,8],[55,0,57,7],[57,0,59,6],[57,15,59,13],[57,24,59,22,"unsubscribe"],[57,35,59,13],[57,38,59,36],[58,0,60,8],[58,14,60,12],[58,15,60,13,"isSubscribed"],[58,27,60,12],[58,31,60,29,"first"],[58,36,60,34],[58,41,60,39],[58,45,60,8],[58,47,60,45],[59,0,61,8,"isSubscribed"],[59,10,61,8,"isSubscribed"],[59,22,61,20],[59,25,61,23],[59,30,61,8],[61,0,63,8],[61,14,63,12,"listener"],[61,22,63,20],[61,23,63,21,"next"],[61,27,63,8],[61,29,63,27],[62,0,64,10,"listener"],[62,12,64,10,"listener"],[62,20,64,18],[62,21,64,19,"next"],[62,25,64,10],[62,26,64,24,"prev"],[62,30,64,10],[62,33,64,31,"listener"],[62,41,64,39],[62,42,64,40,"prev"],[62,46,64,10],[63,0,65,9],[63,11,63,8],[63,17,65,15],[64,0,66,10,"last"],[64,12,66,10,"last"],[64,16,66,14],[64,19,66,17,"listener"],[64,27,66,25],[64,28,66,26,"prev"],[64,32,66,10],[65,0,67,9],[67,0,69,8],[67,14,69,12,"listener"],[67,22,69,20],[67,23,69,21,"prev"],[67,27,69,8],[67,29,69,27],[68,0,70,10,"listener"],[68,12,70,10,"listener"],[68,20,70,18],[68,21,70,19,"prev"],[68,25,70,10],[68,26,70,24,"next"],[68,30,70,10],[68,33,70,31,"listener"],[68,41,70,39],[68,42,70,40,"next"],[68,46,70,10],[69,0,71,9],[69,11,69,8],[69,17,71,15],[70,0,72,10,"first"],[70,12,72,10,"first"],[70,17,72,15],[70,20,72,18,"listener"],[70,28,72,26],[70,29,72,27,"next"],[70,33,72,10],[71,0,73,9],[72,0,74,7],[72,9,59,6],[73,0,75,5],[74,0,19,9],[74,5,19,2],[75,0,77,1],[77,0,79,0],[77,6,79,4,"Subscription"],[77,18,79,16],[77,21,81,0],[77,33,81,12],[78,0,82,2],[78,13,82,11,"Subscription"],[78,25,82,2],[78,26,82,24,"store"],[78,31,82,2],[78,33,82,31,"parentSub"],[78,42,82,2],[78,44,82,42],[79,0,83,4],[79,11,83,9,"store"],[79,16,83,4],[79,19,83,17,"store"],[79,24,83,4],[80,0,84,4],[80,11,84,9,"parentSub"],[80,20,84,4],[80,23,84,21,"parentSub"],[80,32,84,4],[81,0,85,4],[81,11,85,9,"unsubscribe"],[81,22,85,4],[81,25,85,23],[81,29,85,4],[82,0,86,4],[82,11,86,9,"listeners"],[82,20,86,4],[82,23,86,21,"nullListeners"],[82,36,86,4],[83,0,87,4],[83,11,87,9,"handleChangeWrapper"],[83,30,87,4],[83,33,87,31],[83,38,87,36,"handleChangeWrapper"],[83,57,87,31],[83,58,87,56,"bind"],[83,62,87,31],[83,63,87,61],[83,67,87,31],[83,68,87,4],[84,0,88,3],[86,0,90,2],[86,8,90,6,"_proto"],[86,14,90,12],[86,17,90,15,"Subscription"],[86,29,90,27],[86,30,90,28,"prototype"],[86,39,90,2],[88,0,92,2,"_proto"],[88,4,92,2,"_proto"],[88,10,92,8],[88,11,92,9,"addNestedSub"],[88,23,92,2],[88,26,92,24],[88,35,92,33,"addNestedSub"],[88,47,92,24],[88,48,92,46,"listener"],[88,56,92,24],[88,58,92,56],[89,0,93,4],[89,11,93,9,"trySubscribe"],[89,23,93,4],[90,0,94,4],[90,13,94,11],[90,18,94,16,"listeners"],[90,27,94,11],[90,28,94,26,"subscribe"],[90,37,94,11],[90,38,94,36,"listener"],[90,46,94,11],[90,47,94,4],[91,0,95,3],[91,5,92,2],[93,0,97,2,"_proto"],[93,4,97,2,"_proto"],[93,10,97,8],[93,11,97,9,"notifyNestedSubs"],[93,27,97,2],[93,30,97,28],[93,39,97,37,"notifyNestedSubs"],[93,55,97,28],[93,58,97,56],[94,0,98,4],[94,11,98,9,"listeners"],[94,20,98,4],[94,21,98,19,"notify"],[94,27,98,4],[95,0,99,3],[95,5,97,2],[97,0,101,2,"_proto"],[97,4,101,2,"_proto"],[97,10,101,8],[97,11,101,9,"handleChangeWrapper"],[97,30,101,2],[97,33,101,31],[97,42,101,40,"handleChangeWrapper"],[97,61,101,31],[97,64,101,62],[98,0,102,4],[98,10,102,8],[98,15,102,13,"onStateChange"],[98,28,102,4],[98,30,102,28],[99,0,103,6],[99,13,103,11,"onStateChange"],[99,26,103,6],[100,0,104,5],[101,0,105,3],[101,5,101,2],[103,0,107,2,"_proto"],[103,4,107,2,"_proto"],[103,10,107,8],[103,11,107,9,"isSubscribed"],[103,23,107,2],[103,26,107,24],[103,35,107,33,"isSubscribed"],[103,47,107,24],[103,50,107,48],[104,0,108,4],[104,13,108,11,"Boolean"],[104,20,108,18],[104,21,108,19],[104,26,108,24,"unsubscribe"],[104,37,108,18],[104,38,108,4],[105,0,109,3],[105,5,107,2],[107,0,111,2,"_proto"],[107,4,111,2,"_proto"],[107,10,111,8],[107,11,111,9,"trySubscribe"],[107,23,111,2],[107,26,111,24],[107,35,111,33,"trySubscribe"],[107,47,111,24],[107,50,111,48],[108,0,112,4],[108,10,112,8],[108,11,112,9],[108,16,112,14,"unsubscribe"],[108,27,112,4],[108,29,112,27],[109,0,113,6],[109,13,113,11,"unsubscribe"],[109,24,113,6],[109,27,113,25],[109,32,113,30,"parentSub"],[109,41,113,25],[109,44,113,42],[109,49,113,47,"parentSub"],[109,58,113,42],[109,59,113,57,"addNestedSub"],[109,71,113,42],[109,72,113,70],[109,77,113,75,"handleChangeWrapper"],[109,96,113,42],[109,97,113,25],[109,100,113,98],[109,105,113,103,"store"],[109,110,113,98],[109,111,113,109,"subscribe"],[109,120,113,98],[109,121,113,119],[109,126,113,124,"handleChangeWrapper"],[109,145,113,98],[109,146,113,6],[110,0,114,6],[110,13,114,11,"listeners"],[110,22,114,6],[110,25,114,23,"createListenerCollection"],[110,49,114,47],[110,51,114,6],[111,0,115,5],[112,0,116,3],[112,5,111,2],[114,0,118,2,"_proto"],[114,4,118,2,"_proto"],[114,10,118,8],[114,11,118,9,"tryUnsubscribe"],[114,25,118,2],[114,28,118,26],[114,37,118,35,"tryUnsubscribe"],[114,51,118,26],[114,54,118,52],[115,0,119,4],[115,10,119,8],[115,15,119,13,"unsubscribe"],[115,26,119,4],[115,28,119,26],[116,0,120,6],[116,13,120,11,"unsubscribe"],[116,24,120,6],[117,0,121,6],[117,13,121,11,"unsubscribe"],[117,24,121,6],[117,27,121,25],[117,31,121,6],[118,0,122,6],[118,13,122,11,"listeners"],[118,22,122,6],[118,23,122,21,"clear"],[118,28,122,6],[119,0,123,6],[119,13,123,11,"listeners"],[119,22,123,6],[119,25,123,23,"nullListeners"],[119,38,123,6],[120,0,124,5],[121,0,125,3],[121,5,118,2],[123,0,127,2],[123,11,127,9,"Subscription"],[123,23,127,2],[124,0,128,1],[124,3,81,0],[124,5,79,0],[126,0,130,0,"exports"],[126,2,130,0,"exports"],[126,9,130,7],[126,10,130,8],[126,19,130,7],[126,20,130,0],[126,23,130,21,"Subscription"],[126,35,130,0]],"functionMap":{"names":["<global>","notify","createListenerCollection","clear","batch$argument_0","get","subscribe","unsubscribe","<anonymous>","Subscription","addNestedSub","notifyNestedSubs","handleChangeWrapper","isSubscribed","trySubscribe","tryUnsubscribe"],"mappings":"AAA;UCW,oBD;AEG;WCK;KDG;YDC;YGC;OHO;KCC;SGC;KHU;eIC;aCc;ODe;KJC;CFE;AQI;ECC;GDM;wBEI;GFG;4BGE;GHE;+BIE;GJI;wBKE;GLE;wBME;GNK;0BOE;GPO;CRG"}},"type":"js/module"}]}